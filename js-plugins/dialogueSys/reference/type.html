<!DOCTYPE html>
<html>
    <head>
        <link rel="preload" href="/fonts/lightweight.ttf" as="font">
        
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
        
        <style>
            html, body
            {
                height : 100%;
            }
            
            body
            {
                margin : 0;
                background : black;
                color : white;
                font-family : "lightweight";
                font-size : 4.44vw;
                line-height : 6.11vw;
                display : flex;
            }
            
            #dialogue-box
            {
                background : black;
                width : 91.67vw;
                height : 18.06vw;
                padding : 2.78vw;
                border : 0.83vw solid white;
                margin : auto;
                overflow-wrap : break-word;
                visibility : hidden;
            }
            
            #dialogue-box[data-enabled="true"]
            {
                visibility : visible;
            }
            
            #dialogue-box img
            {
                height : 100%;
                image-rendering : pixelated;
            }
            
            @font-face
            {
                font-family : "lightweight";
                src : url("/fonts/lightweight.ttf");
            }
            
            @keyframes text
            {
                from { opacity : 0; }
                to { opacity : 1; }
            }
        </style>
    </head>
    
    <body>
        <div id="dialogue-box"></div>
        
        <script src="/js-plugins/min/dialogueSys.js" type="text/javascript"></script>
        <script type="text/javascript">
            const dialogueBox = document.querySelector("#dialogue-box");
            
            const diaSys = new dialogueSys(dialogueBox,
                // Add a profile
                // that will contain audios and images
                [
                    {
                        name : dialogueSys.PROFILE_DEFAULT,
                        audios : [
                            {
                                name : "def",
                                src : "default.wav"
                            }
                        ],
                        portraits : [
                            {
                                name : "sus",
                                src : "amogus.png"
                            }
                        ]
                    }
                ],
                
                null,
                {
                    audioDir : "/docs-examples/js-plugins/dialogueSys/res/audio",
                    imageDir : "/docs-examples/js-plugins/dialogueSys/res/img",
                }
            );
            
            diaSys.on("OnLoad", async () => {
                // Cache additional data
                // that we will use
                // for the type method
                const typeData = [
                    {
                        style : {
                            // Add fade-in animation
                            // that will not cause delay
                            animation : "0.125s text",
                            
                            letterSpacing : "2vw"
                        }
                    },
                    {
                        // Add typing audio
                        audio : "def",
                        
                        style : {
                            animation : "0.125s text"
                        },
                        
                        // Negate audio
                        // if current char is a space
                        charData : [
                            {
                                params : {
                                    char : [" "]
                                },
                                audio : null
                            }
                        ]
                    },
                    {
                        audio : "def",
                        
                        // Add portrait image
                        portrait : "sus",
                        
                        style : {
                            animation : "0.125s text"
                        },
                        charData : [
                            {
                                params : {
                                    char : [" "]
                                },
                                audio : null
                            }
                        ]
                    }
                ];
                
                await diaSys.delay(5);
                await diaSys.SetActive(true);
                
                // Type text
                // with 'typeData[0]' as data
                await diaSys.type("Behind you...", 0.025, typeData[0]);
                
                await diaSys.delay(3);
                await diaSys.clearText();
                await diaSys.type("Nothing...?", 0.025, typeData[0]);
                await diaSys.delay(4);
                await diaSys.SetActive(false);
                await diaSys.delay(5);
                await diaSys.SetActive(true);
                
                // Type text faster
                // with 'typeData[1]' as data.
                // Plays audio
                await diaSys.type("Anyway", 0.5, typeData[1]);
                
                await diaSys.type("...", 0.125, typeData[1]);
                await diaSys.delay(3);
                await diaSys.clearText();
                
                // Type text more faster
                // with 'typeData[2]' as data.
                // Plays audio and shows portrait
                await diaSys.type("When the impostor is sus.", 1, typeData[2]);
                
                await diaSys.delay(2);
                await diaSys.clear();
                await diaSys.type("Sus,", 1, typeData[2]);
                await diaSys.delay(1);
                diaSys.type(" amogus.", 1, typeData[2]);
            });
        </script>
    </body>
</html>